CREATE TABLE Users (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    email VARCHAR(155) NOT NULL,
    user_status VARCHAR(50) NOT NULL,
    role VARCHAR(20) NOT NULL DEFAULT 'ROLE_USER',
    phone_number VARCHAR(20) NOT NULL,
    login VARCHAR(50) NOT NULL,
    password VARCHAR(100) NOT NULL
);

CREATE TABLE Regions (
    id SERIAL PRIMARY KEY,
    region_name VARCHAR(100) NOT NULL
);

CREATE TABLE Pollution_Places (
    id SERIAL PRIMARY KEY,
    problem_title VARCHAR(255) NOT NULL,
    problem_text TEXT NOT NULL,
    problem_status VARCHAR(100) NOT NULL,
    region_id INT NOT NULL,
    user_id INT NOT NULL,
    creation_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    coordinates_xy VARCHAR(100) NOT NULL,
    FOREIGN KEY (region_id) REFERENCES Regions(id),
    FOREIGN KEY (user_id) REFERENCES Users(id)
);

CREATE TABLE Problem_Reviews (
    id SERIAL PRIMARY KEY,
    review_author VARCHAR(100) NOT NULL,
    review_text TEXT NOT NULL,
    creation_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    publication_status VARCHAR(50) NOT NULL,
    pollution_place_id INT NOT NULL,
    user_id INT NOT NULL,
    FOREIGN KEY (pollution_place_id) REFERENCES Pollution_Places(id),
    FOREIGN KEY (user_id) REFERENCES Users(id)
);

CREATE TABLE Images (
    id SERIAL PRIMARY KEY,
    image_data BYTEA NOT NULL,
    pollution_place_id INT NOT NULL,
    FOREIGN KEY (pollution_place_id) REFERENCES Pollution_Places(id)
);
